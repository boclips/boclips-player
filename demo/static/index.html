<html>
  <head>
    <title>Boclips Player Demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style type="text/css">
      #container,
      #yt-container {
        width: 40%;
      }
      #players {
        display: flex;
        justify-content: space-evenly;
      }
    </style>
  </head>
  <body>
    <script
      src="https://unpkg.com/boclips-js-security@8.0.0/dist/min/boclips-js-security.js"
      type="text/javascript"
    ></script>
    <div id="players">
      <div id="container"></div>
      <div id="yt-container"></div>
    </div>

    <script>
      const boclipsSecurity = BoclipsJSSecurity.default.createInstance({
        onLogin: () => {
          console.log('Successfully authenticated');
          renderPlayer();
        },
        onFailure: () => {
          console.log('login failed');
        },
        realm: 'boclips',
        clientId: 'teachers',
        authEndpoint: 'https://login.staging-boclips.com',
      });

      const renderPlayer = () => {
        const container = document.querySelector('#container');
        const ytContainer = document.querySelector('#yt-container');
        const options = {
          api: {
            tokenFactory: boclipsSecurity.getTokenFactory(5),
          },
          analytics: {
            handleOnSegmentPlayback: console.log,
            metadata: {
              color: 'blue',
            },
          },
          interface: {
            controls: [
              'play-large',
              'rewind',
              'play',
              'fast-forward',
              'progress',
              'current-time',
              'settings',
              'mute',
              'volume',
              'captions',
              'fullscreen',
            ],
            addons: {
              hoverPreview: true,
              titleOverlay: true,
            },
          },
          displayAutogeneratedCaptions: false,
        };

        const player = Boclips.PlayerFactory.get(container, options);
        player.loadVideo(
                'https://api.staging-boclips.com/v1/videos/5e0f711804d95551584b3fa7',
                '',
                'eyJhbGciOiJIUzI1NiJ9.Y2RjMzUyZDAtMzZjZS00ZDIyLWE1OTctOTBiZWYyNjM1ODI2.DYvaH3PFfHI_UxX8v295ObMAypgptva5MMvEoI6MV2E',
                '72d01739ccf435f51b9a4e36bbb792b74015024b939cedc68471b499a1360d0a',
                'super-mod',
        )

        const ytPlayer = Boclips.PlayerFactory.get(ytContainer, options);
        ytPlayer.loadVideo(
          'https://api.staging-boclips.com/v1/videos/61aca08beaf1075960239144',
        );
      };
    </script>
  </body>
</html>

<style>
  .plyr {
    height: 80vh;
  }
</style>
